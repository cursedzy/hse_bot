<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>reminder-bot</title>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="navbar-nav">
                <div class="nav-item"><h1>НИУ ВШЭ Психологическое тестирование</h1></div>   
            </div>
        </nav>
    </header>
    <main>
        <div id="app" class="wrap">
            <div class="init_box">
                <h2 class="test-header">Насколько каждое слово описывает ваше состояние в данный момент?</h2>
                <button id="init_button">Начать</button>
            </div>
            <div class="id_input" style="display: none;">
                <label for="login"> 
                    Логин: 
                </label><br> 
                <input type="text" id="login" name="login" placeholder="ya_lublu_bulochki" required>
                <p>*пожалуйста, введите ваш логин указанный при регистрации в ТГ. Это поможет нам лучше обработывать ваши результаты</p>
                <button id="send_id">Далее</button>                  
            </div>
            <div class="test_box" style="display: none;">
                <form id="test_form">
                    <div class="question" id="q1">
                        <h3 class="q_number">Вопрос №1</h3>
                        <label class="statement">Грусть</label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q1a0" name="q1" value="0" required>
                                <label for="q1a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q1a1" name="q1" value="1" required>
                                <label for="q1a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q1a2" name="q1" value="2" required>
                                <label for="q1a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q1a3" name="q1" value="3" required>
                                <label for="q1a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q1a4" name="q1" value="4" required>
                                <label for="q1a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q1a5" name="q1" value="5" required>
                                <label for="q1a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q2" style="display: none;">
                        <h3 class="q_number">Вопрос №2</h3>
                        <label class="statement">Беспокойство/тревога</label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q2a0" name="q2" value="0" required>
                                <label for="q2a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q2a1" name="q2" value="1" required>
                                <label for="q2a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q2a2" name="q2" value="2" required>
                                <label for="q2a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q2a3" name="q2" value="3" required>
                                <label for="q2a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q2a4" name="q2" value="4" required>
                                <label for="q2a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q2a5" name="q2" value="5" required>
                                <label for="q2a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q3" style="display: none;">
                        <h3 class="q_number">Вопрос №3</h3>
                        <label class="statement">Раздражение</label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q3a0" name="q3" value="0" required>
                                <label for="q3a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q3a1" name="q3" value="1" required>
                                <label for="q3a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q3a2" name="q3" value="2" required>
                                <label for="q3a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q3a3" name="q3" value="3" required>
                                <label for="q3a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q3a4" name="q3" value="4" required>
                                <label for="q3a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q3a5" name="q3" value="5" required>
                                <label for="q3a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q4" style="display: none;">
                        <h3 class="q_number">Вопрос №4</h3>
                        <label class="statement">Чувство одиночества</label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q4a0" name="q4" value="0" required>
                                <label for="q4a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q4a1" name="q4" value="1" required>
                                <label for="q4a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q4a2" name="q4" value="2" required>
                                <label for="q4a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q4a3" name="q4" value="3" required>
                                <label for="q4a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q4a4" name="q4" value="4" required>
                                <label for="q4a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q4a5" name="q4" value="5" required>
                                <label for="q4a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q5" style="display: none;">
                        <h3 class="q_number">Вопрос №5</h3>
                        <label class="statement">Вина</label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q5a0" name="q5" value="0" required>
                                <label for="q5a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q5a1" name="q5" value="1" required>
                                <label for="q5a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q5a2" name="q5" value="2" required>
                                <label for="q5a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q5a3" name="q5" value="3" required>
                                <label for="q5a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q5a4" name="q5" value="4" required>
                                <label for="q5a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q5a5" name="q5" value="5" required>
                                <label for="q5a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q6" style="display: none;">
                        <h3 class="q_number">Вопрос №6</h3>
                        <label class="statement">Апатия/безразличие </label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q6a0" name="q6" value="0" required>
                                <label for="q6a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q6a1" name="q6" value="1" required>
                                <label for="q6a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q6a2" name="q6" value="2" required>
                                <label for="q6a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q6a3" name="q6" value="3" required>
                                <label for="q6a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q6a4" name="q6" value="4" required>
                                <label for="q6a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q6a5" name="q6" value="5" required>
                                <label for="q6a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q7" style="display: none;">
                        <h3 class="q_number">Вопрос №7</h3>
                        <label class="statement">Подавленность</label>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q7a0" name="q7" value="0" required>
                                <label for="q7a0">0</label>
                                <label id="explanation">Совсем не испытывал</label>
                            </li>
                            <li>
                                <input type="radio" id="q7a1" name="q7" value="1" required>
                                <label for="q7a1">1</label>
                            </li>
                            <li>
                                <input type="radio" id="q7a2" name="q7" value="2" required>
                                <label for="q7a2">2</label>
                            </li>
                            <li>
                                <input type="radio" id="q7a3" name="q7" value="3" required>
                                <label for="q7a3">3</label>
                            </li>
                            <li>
                                <input type="radio" id="q7a4" name="q7" value="4" required>
                                <label for="q7a4">4</label>
                            </li>
                            <li>
                                <input type="radio" id="q7a5" name="q7" value="5" required>
                                <label for="q7a5">5</label>
                                <label id="explanation">Испытывал очень интенсивно</label>
                            </li>
                        </ul>
                        <div class="navigation-buttons" style="display: none;">
                            <button type="button" class="prev-question">Назад</button>
                            <button type="button" class="next-question">Далее</button>
                        </div>
                    </div>
                    <div class="question" id="q8" style="display: none;">
                        <h3 class="q_number">Вопрос №8</h3>
                        <label class="statement">С момента предыдущего уведомления, для того чтобы улучшить своё эмоциональное состояние, какие стратегии вы использовали?</label>
                        <p id="q8_p">*если вы впервые проходите данный тест, укажите последнюю использованную вами стратегию.</p>
                        <ul class='likert'>
                            <li>
                                <input type="radio" id="q8a_change" name="q8" value="change" required> 
                                <label for="q8a_change">Изменял(а) своё отношение к ситуации, чтобы справиться с отрицательными эмоциями (переоценка)</label>
                            </li>
                            <li>
                                <input type="radio" id="q8a_supress" name="q8" value="supress" required> 
                                <label for="q8a_supress">Подавлял(а) выражение своих эмоций (подавление)</label>
                            </li>
                            <li>
                                <input type="radio" id="q8a_accept" name="q8" value="accept" required> 
                                <label for="q8a_accept">Принимал(а) текущие переживания, не сопротивляясь им и не пытаясь их изменить (принятие)</label>
                            </li>
                            <li>
                                <input type="radio" id="q8a_analize" name="q8" value="analize" required> 
                                <label for="q8a_analize">Прокручивал(а) мысли о неприятной ситуации снова и снова (руминация)</label>
                            </li>
                            <li>
                                <input type="radio" id="q8a_awoid" name="q8" value="awoid" required> 
                                <label for="q8a_awoid">Отстранялся от своих эмоций так, будто их нет (избегание)</label>
                            </li>
                            <li>
                                <input type="radio" id="q8a_decide" name="q8" value="decide" required> 
                                <label for="q8a_decide">Старался решить проблему, вызвавшую неприятные эмоции (решение проблемы)</label>
                            </li>
                        </ul>
                        <div class="buttons">
                            <button type="button" class="submit">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </main>
    <footer>
        <div class="contacts">
            <ul> Контакты
                <li><a href="#">Telegram</a></li>
                <li><a href="#">Phone</a></li>
                <li><a href="#">Email</a></li>
            </ul>
        </div>
        <div class="r_reserved">
            <p>© 2024. HSE Psychology x cursedzy</p>
        </div>
    </footer>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const initButton = document.getElementById('init_button');
            const sendIdButton = document.getElementById('send_id');
            const testForm = document.getElementById('test_form');
            const idInput = document.querySelector('.id_input');
            const testBox = document.querySelector('.test_box');
            const initBox = document.querySelector('.init_box');
            const questions = document.querySelectorAll('.question');
            const navButtons = document.querySelectorAll('.navigation-buttons');
            let currentQuestion = 0;
        
            const userResponses = {
                login: '',
                answers: {}
            };
        
            initButton.addEventListener('click', function() {
                initBox.style.display = 'none';
                idInput.style.display = 'block';
            });
        
            sendIdButton.addEventListener('click', function() {
                const loginInput = document.getElementById('login').value;
                if (loginInput) {
                    userResponses.login = loginInput;
                    idInput.style.display = 'none';
                    testBox.style.display = 'block';
                    showQuestion(currentQuestion);
                }
            });
        
            document.addEventListener('click', function(event) {
                if (event.target.classList.contains('next-question')) {
                    collectAnswer();
                    if (currentQuestion < questions.length - 1) {
                        currentQuestion++;
                        showQuestion(currentQuestion);
                    } else {
                        sendResults();
                    }
                }
        
                if (event.target.classList.contains('prev-question')) {
                    if (currentQuestion > 0) {
                        currentQuestion--;
                        showQuestion(currentQuestion);
                    }
                }
            });
        
            function showQuestion(index) {
                questions.forEach((question, idx) => {
                    question.style.display = idx === index ? 'block' : 'none';
                });
                navButtons.forEach((buttons, idx) => {
                    buttons.style.display = idx === index ? 'block' : 'none';
                });
            }
        
            function collectAnswer() {
                const currentRadioButtons = questions[currentQuestion].querySelectorAll('input[type="radio"]');
                for (let radio of currentRadioButtons) {
                    if (radio.checked) {
                        userResponses.answers[`q${currentQuestion + 1}`] = radio.value;
                        break;
                    }
                }
            }
        
            function sendResults() {
                fetch('.../submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userResponses)
                })
                .then(response => response.json())
                .then(data => {
                    alert('Results submitted successfully');
                    // Optionally redirect to a results page or reset the form
                })
                .catch(error => {
                    console.error('Error:', error);
                });
            }
        });
        </script>


</body>
</html>
